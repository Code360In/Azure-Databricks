(window.webpackJsonp=window.webpackJsonp||[]).push([["msccCookieBanner"],{lUXz:function(e,t,n){"use strict";n.r(t),n.d(t,"getMsccCookieBannerHeightInPx",(function(){return A.a})),n.d(t,"MsccCookieBannerActions",(function(){return i})),n.d(t,"MsccCookieBannerDataConnector",(function(){return f})),n.d(t,"MsccCookieBannerDataReducer",(function(){return w})),n.d(t,"ToolingInfo",(function(){return B}));var o=n("G82u");class i{}i.cookieBannerRendered=new o.a("MsccCookieBannerRendered");var r=n("D57K"),s=n("s9+9"),c=n("KRKw"),a=n("1w6q"),d=n("3Amp"),l=n("HxRh");const h="MSCC Stylesheets not specified",u="MSCC Scripts not specified",m="Failed to parse statics URLs for data-",p="cookiecompliance";var C=n("Am8i"),g=n("u5KZ"),b=n("JnE6"),S=n("HDSB"),k=n("XgsJ"),v=n("Gsg7");class E{constructor(){this.stylesheetRelValue="stylesheet",this.cookieBannerElement=document.getElementById("consent-banner-container")}showBanner(){return Object(r.b)(this,void 0,void 0,(function*(){if(!this.cookieBannerElement)return;const e=[this.mountStyles(),this.mountScripts()];yield Promise.all(e),this.cookieBannerElement.style.display="block",this.addTelemetryAttributesAndSendPartialImpression()}))}registerForConsentEvent(e){window.mscc.on("consent",()=>{e&&e()})}addTelemetryAttributesAndSendPartialImpression(){const e=new v.a({name:"consent_root"}).addOrUpdateChild({name:p,type:C.e.MsccCookieComplianceBanner}).render();this.cookieBannerElement.setAttribute("data-t",e["data-t"].toString()),g.a.sendContentViewEvent(this.cookieBannerElement,b.b.Partial)}mountScripts(){return Object(r.b)(this,void 0,void 0,(function*(){const e=this.getStaticsUrlsFromDataAttribute("scripts");if(!(e.length>0))throw this.logAppError(l.gb.ScriptsNotFound,u),new Error(u);{const t=e.map(e=>this.getPromiseToMountScript(e));yield Promise.all(t)}}))}mountStyles(){return Object(r.b)(this,void 0,void 0,(function*(){const e=this.getStaticsUrlsFromDataAttribute("styles");if(!(e.length>0))throw this.logAppError(l.gb.StyleSheetsNotFound,h),new Error(h);{const t=e.map(e=>this.getPromiseToMountStyleSheet(e));yield Promise.all(t)}}))}getStaticsUrlsFromDataAttribute(e){const t=this.cookieBannerElement.dataset[e];let n=[];if(t)try{n=JSON.parse(t)}catch(t){throw this.logAppError(l.gb.FailedToParseStaticsUrls,m+e),new Error(m+e)}return n}getPromiseToMountScript(e){return Object(r.b)(this,void 0,void 0,(function*(){return new Promise((t,n)=>{if(!Object(S.a)())return;const o=Object(k.b)(e);o.onload=()=>{t()},o.onerror=e=>{this.logAppError(l.gb.FailedToMountScript,JSON.stringify(e)),n(e)},document.head.appendChild(o)})}))}getPromiseToMountStyleSheet(e){return Object(r.b)(this,void 0,void 0,(function*(){return new Promise((t,n)=>{const o=document.createElement("link");o.href=e,o.rel=this.stylesheetRelValue,o.onload=()=>{t()},o.onerror=e=>{this.logAppError(l.gb.FailedToMountStyleSheet,JSON.stringify(e)),n(e)},document.head.appendChild(o)})}))}logAppError(e,t){g.a.sendAppErrorEvent(Object.assign(Object.assign({},e),{message:t}))}}var y=n("9J8d");class f extends a.a{constructor(e,t,n,o,i,r,s){super(e,t,n,o,i,r,s),this.clickEventName="click",this.inputEventName="input",this.msccCookieConsentHelper=new E,this.initializeCookieBanner()}initializeCookieBanner(){return Object(r.b)(this,void 0,void 0,(function*(){const e=y.a.getInstance().rootReducer.connector(s.a.SharedState),t=e.getCurrentState(),n=t.cookieConsentProvider===c.a.MSCCBanner&&t.cookieConsentStatus===c.b.Required,o=d.a.cookieConsentStatus.getActionSender(e);n&&(yield this.msccCookieConsentHelper.showBanner(),i.cookieBannerRendered.getActionSender(this).send(!0),this.registerImplicitConsentCheckEventListeners(),this.msccCookieConsentHelper.registerForConsentEvent(()=>{o.send(c.b.NotRequired)}))}))}registerImplicitConsentCheckEventListeners(){document.body.addEventListener(this.clickEventName,this.handleImplicitConsentCheck),document.body.addEventListener(this.inputEventName,this.handleImplicitConsentCheck)}handleImplicitConsentCheck(e){"false"!==e.target.getAttribute("data-mscc-ic")&&(window.mscc.setConsent(),document.body.removeEventListener(this.clickEventName,this.handleImplicitConsentCheck),document.body.removeEventListener(this.inputEventName,this.handleImplicitConsentCheck))}}class w{reduce(e,t){return e||{}}}var A=n("hWAW");const B={experienceConfigSchema:{}}}}]);